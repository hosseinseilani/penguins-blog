---
authors: pieroproietti
slug: 
title: "Addaura"
lang: en
enableComments: true
---

import Translactions from '@site/src/components/Translactions';

<Translactions />

Ricordati di santificare le feste.

A Zagarolo in provincia di Roma la festa è una, oltre al patrono di San Lorenzo, ed è la prima domenica di ottobre: la sagra dell'uva.

Che c'entra questo in un articolo dove andremo a trattare come adattare la versione attuale di penguins-eggs a LMDE 6 i386, potrebbe sembrare un mistero. In realtà è piuttosto semplice, sono originario di Zagarolo e le "radighe" "radici" per chi non è del paese, non si dimenticano mai.

# Node ed il problema dell'architettura i386

Dalle prime versioni di penguins-eggs, utilizzo nodesource come repository du nodejs. Da molti anni però nodesource non rilascia più la versione i386. Per molto tempo, facendo i salti mortali, sono rimasto legato all'ultima versione disponibile per i386 su nodesource la versione node8, poi ho abbandonato passando direttamente alla versione node16.

Con l'uscita di LMDE 6, mi è stato chiesto se era possibile rimasterizzare anche la versione i386 e così mi sono ritrovato a rimetterci le mani.

# penguins-eggs v8.17.17

Pur disponendo di tutti i sorgenti della versione 8.17.17 la stessa NON può essere transpilata senza "pesanti" interventi. 

Ho optato - tanto per fare una prova - ad utilizzarla comunque ed ad andare a creare le modifiche direttamente sui file transpilati ed installati.

Tutto sommato è riuscito abbastanza semplice, dopo aver installato penguins-eggs v.8.17.17 sono andato a modificare due file che si trovano in `/usr/lib/penguins-eggs/lib/classes`;

* on `/usr/lib/penguins-eggs/lib/classes/distros.js` find `debbie` and replace with `faye`, then replace in the follow line `buster` with `bullseye`

In verità vi era anche qualche altra cosa, ed avevo prodotto la ISO in maniera soddisfacente.

## Mumble, mumble...
Naturalmente allineare la versione i386 a quella amd64 sarebbe stato l'ideale e così, stamattina ho cominciato a provare.

Io utilizzo per creare il pacchetto deb, oclif che fa un po' tutto da solo ed è stato splendido specialmente agli inizi. 

Aprendo `/usr/lib/penguins-eggs/bin` ho visto che metteva l'eseguibile di node in questa posizione, allora ho provato a rifare il pacchetto, rimuovere in DEBIAN/control i riferimenti ad `amd64`, aggiungere `nodejs` come dipendenza e vedere che succede.

Niente, succede. Sostituendo all'eseguibile di node un link a `/usr/bin/node` l'eseguibile installato da apt, il tutto funziona!

L'unica accortezza è appunto eseguire questa operazione dopo l'installazione.

Naturalmente, nei prossimi giorni, proverò ad automatizzarla, includendo la creazione del necessario link nello script di post-installazione.

Per oggi direi che basta e buona sagra dell'uva!

![Sagra dell'uva 2023](https://comune.zagarolo.rm.it/upload/news/Sagra%20dellUva%20con%20data.jpg)


